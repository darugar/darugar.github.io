<html>
<head>
    <link rel="stylesheet" href="/css/bootstrap/css/bootstrap.min.css" />
    <link rel="stylesheet" href="/css/parand.css">
    <link href='http://fonts.googleapis.com/css?family=Open+Sans|Italianno' rel='stylesheet' type='text/css'>
    <title>This came from the blog</title>
</head>

<body>

<div class="container">
    <div class="row navigation">
        <div class="span3">
            Parand Tony Darugar
        </div>
        <div class="span8 offset1">
            <span class="nav right"><a href="">About me</a></span>
            <span class="nav right"><a href="http://twitter.com/parand/">@parand</a></span>
            <span class="nav right">s@parand.com</span>
            <!-- span class="nav right"><input type="text" class="input-medium search-query"></span -->
            
        </div>
    </div>

    <div class="row headerrow">
        <div class="span7 heading"><a href="">This came from the blog</a></div>
        <div class="span5 subheading text-right">A Cruel and Petty Dictator</div>
    </div>

    <!-- CONTENT -->
    <div class="row content">
        <div class="span12">
<p>I needed to efficiently find large images (those with dimensions greater than x). Here&#8217;s what I came up with:</p>

<p>First, find images whose file size is greater than 3M:</p>

<pre><code>find . -name &#39;*jpg&#39; -size 3M &gt; /tmp/big-receipts.txt</code></pre>

<p>Now, get the dimensions of each of those images using imagemagick&#8217;s identify command line utility. The key to using this thing efficiently is to include the &#8220;-ping&#8221; flag (believe it or not that took me quite a while to figure out):</p>

<pre><code>identify -ping filename.jpg</code></pre>

<p>displays this type of output:</p>

<pre><code>/tmp/big.jpg JPEG 10200x13200 10200x13200+0+0 8-bit DirectClass 5.54MB 0.000u 0:00.000</code></pre>

<p>Now we can put the two together:</p>

<pre><code>for fname in `cat /tmp/big-receipts.txt`; do identify -ping $fname; done</code></pre>

<h2 id='2_comments_so_far'>2 Comments so far</h2>

<p>1. <a href='/web/20130205133159/http://mark.ossdl.de/'>Mark</a> on May 10th, 2012</p>

<p>No need for the dot in &#8220;find&#8221;, the intermediate text-file and the for-loop:</p>

<pre><code>find -name &#39;*jpg&#39; -size 3M -exec identify -ping &#39;{}&#39; \;</code></pre>

<p>If you more than one CPU (say, 4) this could be faster:</p>

<pre><code>find -name &#39;*jpg&#39; -size 3M | xargs -max-args=1 -max-procs=4 identify -ping</code></pre>

<p>Too much output? &#8220;cut&#8221; is your friend:</p>

<pre><code>â€¦ | cut -d &#39; &#39; -f 1,3</code></pre>

<p>2. Parand on May 10th, 2012</p>

<p>Thanks Mark, that&#8217;s excellent.</p>

<p>Posting your comment.</p>
        </div>
    </div>

    <!-- div class="row contents">
        <div class="span12">
            <img class="img-polaroid" src="http://farm5.staticflickr.com/4148/5066965098_f73170bbf6_b.jpg">
        </div>
    </div>


    <div class="row contents">
        <div class="span12">
<em>What about our student loans?</em> asked one of the students.
        </div>
    </div -->

    <div class="row contents">
        <div class="span12 signature">
            Parand Tony Darugar - 21 Aug 2014
        </div>
    </div>

    <div class="row titlerow">
        <div class="span9 title">More:</div>
    </div>
    <div class="row ">
        <div class="span9 title">&raquo; Martin the Silly Rainbow</div>
        <div class="span3 title-details text-right">January 1st, 2013</div>
    </div>
    <div class="row ">
        <div class="span9 title">&raquo; If I Fell In Love With You</div>
        <div class="span3 title-details text-right">November 16th, 2013</div>
    </div>

</div>

</body>

</html>
